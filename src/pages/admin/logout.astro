---
import { createServerClient } from '../../services/supabase-server';

// Cerrar sesión usando cliente de servidor
try {
  const supabase = createServerClient(Astro.cookies, Astro.request);
  await supabase.auth.signOut();
} catch (e) {
  // Continuar aunque haya error
}

// Eliminar cookies manualmente según la documentación oficial
Astro.cookies.delete("sb-access-token", {
  path: "/",
});
Astro.cookies.delete("sb-refresh-token", {
  path: "/",
});

// Redirigir al login
return Astro.redirect('/admin/login');
---

